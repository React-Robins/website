{"version":3,"file":"utils.cjs.js","sources":["../src/index.js"],"sourcesContent":["// @flow\nimport type {\n  RegisteredCache,\n  CSSContextType,\n  ScopedInsertableStyles\n} from './types'\n\nexport const isBrowser = typeof document !== 'undefined'\nexport const shouldSerializeToReactTree =\n  !isBrowser || process.env.NODE_ENV === 'test'\n\nexport function getRegisteredStyles(\n  registered: RegisteredCache,\n  registeredStyles: string[],\n  classNames: string\n) {\n  let rawClassName = ''\n\n  classNames.split(' ').forEach(className => {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className])\n    } else {\n      rawClassName += `${className} `\n    }\n  })\n  return rawClassName\n}\n\nexport const insertStyles = (\n  context: CSSContextType,\n  insertable: ScopedInsertableStyles\n) => {\n  if (context.registered[`${context.key}-${insertable.name}`] === undefined) {\n    context.registered[`${context.key}-${insertable.name}`] = insertable.styles\n  }\n  if (context.inserted[insertable.name] === undefined) {\n    let rules = context.stylis(\n      `.${context.key}-${insertable.name}`,\n      insertable.styles\n    )\n\n    if (shouldSerializeToReactTree) {\n      context.inserted[insertable.name] = rules.join('')\n      if (context.compat === undefined) {\n        return context.inserted[insertable.name]\n      }\n    } else {\n      rules.forEach(rule => {\n        context.sheet.insert(rule)\n      })\n      context.inserted[insertable.name] = true\n    }\n  }\n}\n\nexport * from './types'\n"],"names":["isBrowser","document","shouldSerializeToReactTree","process","env","NODE_ENV","getRegisteredStyles","registered","registeredStyles","classNames","rawClassName","split","forEach","className","undefined","push","insertStyles","context","insertable","key","name","styles","inserted","rules","stylis","join","compat","sheet","insert","rule"],"mappings":";;;;IAOaA,YAAY,OAAOC,QAAP,KAAoB,WAAtC;AACP,IAAaC,6BACX,CAACF,SAAD,IAAcG,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,MADlC;AAGP,AAAO,SAASC,mBAAT,CACLC,UADK,EAELC,gBAFK,EAGLC,UAHK,EAIL;MACIC,eAAe,EAAnB;aAEWC,KAAX,CAAiB,GAAjB,EAAsBC,OAAtB,CAA8B,qBAAa;QACrCL,WAAWM,SAAX,MAA0BC,SAA9B,EAAyC;uBACtBC,IAAjB,CAAsBR,WAAWM,SAAX,CAAtB;KADF,MAEO;sBACcA,SAAnB;;GAJJ;SAOOH,YAAP;;AAGF,IAAaM,eAAe,SAAfA,YAAe,CAC1BC,OAD0B,EAE1BC,UAF0B,EAGvB;MACCD,QAAQV,UAAR,CAAsBU,QAAQE,GAA9B,SAAqCD,WAAWE,IAAhD,MAA4DN,SAAhE,EAA2E;YACjEP,UAAR,CAAsBU,QAAQE,GAA9B,SAAqCD,WAAWE,IAAhD,IAA0DF,WAAWG,MAArE;;;MAEEJ,QAAQK,QAAR,CAAiBJ,WAAWE,IAA5B,MAAsCN,SAA1C,EAAqD;QAC/CS,QAAQN,QAAQO,MAAR,OACNP,QAAQE,GADF,SACSD,WAAWE,IADpB,EAEVF,WAAWG,MAFD,CAAZ;;QAKInB,0BAAJ,EAAgC;cACtBoB,QAAR,CAAiBJ,WAAWE,IAA5B,IAAoCG,MAAME,IAAN,CAAW,EAAX,CAApC;;UACIR,QAAQS,MAAR,KAAmBZ,SAAvB,EAAkC;eACzBG,QAAQK,QAAR,CAAiBJ,WAAWE,IAA5B,CAAP;;KAHJ,MAKO;YACCR,OAAN,CAAc,gBAAQ;gBACZe,KAAR,CAAcC,MAAd,CAAqBC,IAArB;OADF;cAGQP,QAAR,CAAiBJ,WAAWE,IAA5B,IAAoC,IAApC;;;CAtBC;;;;;;;"}